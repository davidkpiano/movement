

@mixin m-keyframes($effect) {
    @if _instance-of($effect, 'KeyframeEffect') {
        $effect: _m-render-offset($effect);

        $target: _get($effect, 'target');
        $frames: _get($effect, 'frames');
        $options: _get($effect, 'options');
        $name: _get($options, 'name');
        $animation: (
            -webkit-animation-name: _get($options, 'name'),
            -webkit-animation-duration: _get($effect, 'calculated' 'duration'),
            -webkit-animation-delay: _get($effect, 'calculated' 'delay'),
            -webkit-animation-fill-mode: forwards
        );

        $playlist: append($playlist, ($target: $animation)) !global;

        @-webkit-keyframes #{$name} {    
            @each $keyframe in $frames {
                $offset: _get($keyframe, 'offset');
                $declarations: _get($keyframe, 'declarations');

                #{$offset} {
                    @include _declare($declarations);
                }
            }
        }
    } @else {
        $child-effects: _get($effect, 'effects');

        @each $child-effect in $child-effects {
            @include m-keyframes($child-effect);
        }
    }
}

@mixin m-shared-keyframe-list($name, $keyframes: ()) {
    $keyframes: m-shared-keyframe-list($name, $keyframes);

    @keyframes #{$name} {
        @include _rules($keyframes);
    }
}