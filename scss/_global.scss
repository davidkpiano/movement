

$_nodes: ();

$_current-node: ();

@function new($type, $params, $extends: false) {
    $instance: (
        _type: $type
    );

    // @if $extends {
    //     $instance: map-merge($instance, call($extends, $params...));
    // }

    $instance: map-merge($instance, call($type, $params...));

    @return $instance;
}

@function mm-node-get($key) {
    @return map-get($_current-node, $key);
}

@mixin mm-node-set($key, $value) {
    $_current-node: map-merge($_current-node, ($key: $value)) !global;
}

@mixin mm-node-push($key, $value) {
    $current-list: map-get($_current-node, $key);
    $updated-list: append($current-list, $value);

    @include mm-node-set($key, $updated-list);
}

@mixin run() {
    %__temp { @content; }
}